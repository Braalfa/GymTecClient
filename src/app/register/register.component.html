<div class="bg-image">
  <div id="general-block" class="container-fluid">
    <div class="align-content-center border border-2 rounded shadow p-3 bg-body bg-light">
      <div class="row border-bottom" style="width: 95%; margin: auto">
        <div style="width: 100%">
          <h4 class="text-center text-secondary">Registro - GymTEC</h4>
        </div>
      </div>
      <!-- Form -->
      <form id="form" #profileForm class="center-form" (ngSubmit)="register()"  >
        <!-- Name -->
        <div class="row" >
          <div class="col-md-6 col-sm-12 pr-md-1">
            <input required pattern="[A-Za-zÀ-ÖØ-öø-ÿ]*" type="text" id="firstName" name="firstName" class="form-control"
                   placeholder="Primer Nombre" [(ngModel)]="form.nombre1" #name="ngModel"
                   [class.is-invalid]="name.invalid && (name.dirty || name.touched|| sendAttempt)">
            <div class="invalid-feedback">
              Porfavor indique un nombre valido.
            </div>
          </div>
          <div class="col-md-6 col-sm-12 pl-md-1 mt-3 mt-md-0">
            <input pattern="[A-Za-zÀ-ÖØ-öø-ÿ]*" type="text" id="secondName" name="secondName" class="form-control"
                   placeholder="Segundo Nombre" [(ngModel)]="form.nombre2" #name2="ngModel"
                   [class.is-invalid]="name2.invalid && (name2.dirty || name2.touched|| sendAttempt)">
            <div class="invalid-feedback">
              Porfavor indique un segundo nombre valido.
            </div>
          </div>
        </div>
        <!-- Last Name -->
        <div class="row mt-3">
          <div class="col-md-6 col-sm-12 pr-md-1">
            <input required pattern="[A-Za-zÀ-ÖØ-öø-ÿ]*" type="text" id="lastName1" name="lastName1" class="form-control"
                   placeholder="Primer Apellido" [(ngModel)]="form.apellido1" #lname1="ngModel"
                   [class.is-invalid]="lname1.invalid && (lname1.dirty || lname1.touched|| sendAttempt)">
            <div class="invalid-feedback">
              Porfavor indique un apellido valido.
            </div>
          </div>
          <div class="col-md-6 col-sm-12 pl-md-1 mt-3 mt-md-0">
            <input pattern="[A-Za-zÀ-ÖØ-öø-ÿ]*" type="text" id="lastName2" name="lastName2" class="form-control"
                   placeholder="Segundo Apellido" [(ngModel)]="form.apellido2" #lname2="ngModel"
                   [class.is-invalid]="lname2.invalid && (lname2.dirty || lname2.touched|| sendAttempt)">
            <div class="invalid-feedback">
              Porfavor indique un apellido valido.
            </div>
          </div>
        </div>
        <!-- Email y Cedula-->
        <div class="row mt-3">
          <div class="col-md-6 col-sm-12 pr-md-1">
            <input required pattern='\S+@\S+\.\S+' type="email" id="email" name="email" class="form-control"
                   placeholder="Correo Electrónico" [(ngModel)]="form.correo" #email="ngModel"
                   [class.is-invalid]="email.invalid && (email.dirty || email.touched|| sendAttempt)">
            <div class="invalid-feedback">
              Porfavor indique un email valido.
            </div>
          </div>
          <div class="col-md-6 col-sm-12 pl-md-1 mt-3 mt-md-0">
            <input required pattern='[0-9]*' type="text" id="cedula" name="cedula" class="form-control"
                   placeholder="Cédula" [(ngModel)]="form.cedula" #cedula="ngModel"
                   [class.is-invalid]="cedula.invalid && (cedula.dirty || cedula.touched|| sendAttempt)">
            <div class="invalid-feedback">
              Porfavor indique una cédula valida.
            </div>
          </div>
        </div>
        <!-- Password -->
        <div class="row mt-3">
          <div class="col-12">
            <input required pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$" type="password" id="password" name="password" class="form-control"
                   placeholder="Contraseña" [(ngModel)]="form.password" #password="ngModel"
                   [class.is-invalid]="password.invalid && (password.dirty || password.touched|| sendAttempt)">
            <div class="invalid-feedback">
              La contraseña debe de tener al menos 8 carácteres, una mayúscula, una minúscula y un número.
            </div>
          </div>
        </div>
        <!-- Edad y Fecha de Nacimiento -->
        <div class="row mt-3">
          <div class="col-md-6 col-sm-12 pr-md-1">
            <input required pattern="[0-9]*" type="text" id="age" name="age" class="form-control"
                   placeholder="Edad" [(ngModel)]="form.edad" #edad="ngModel"
                   [class.is-invalid]="edad.invalid && (edad.dirty || edad.touched|| sendAttempt)">
            <div class="invalid-feedback">
              Porfavor indique un texto valido.
            </div>
          </div>
          <div class="col-md-6 col-sm-12 pl-md-1 mt-3 mt-md-0">
            <div class="input-group">
              <input placeholder="Nacimiento"  type="text" required
                     class="form-control" [(ngModel)]="form.fechanacimiento"  ngbDatepicker #d="ngbDatepicker"  #fechaNacimiento="ngModel"
                     [class.is-invalid]="fechaNacimiento.invalid && (fechaNacimiento.dirty || fechaNacimiento.touched|| (sendAttempt))"
                     id="birth" name="birth">
              <div class="input-group-append">
                <button class="btn btn-outline-secondary rounded-right calendar" (click)="d.toggle()" type="button">
                  <i class="bi-calendar"></i>
                </button>
              </div>
              <div class="invalid-feedback">
                Porfavor indique una fecha válida.
              </div>
            </div>
          </div>
        </div>
        <!-- Peso,  IMC -->

        <div class="row mt-3">
          <div class="col-md-6 col-sm-12 pr-md-1">
            <input required pattern="[0-9]*" type="text" id="peso" name="peso" class="form-control"
                   placeholder="Peso" [(ngModel)]="form.peso" #peso="ngModel"
                   [class.is-invalid]="peso.invalid && (peso.dirty || peso.touched|| sendAttempt)">
            <div class="invalid-feedback">
              El peso debe ser numérico.
            </div>
          </div>
          <div class="col-md-6 col-sm-12 pl-md-1 mt-3 mt-md-0">
            <input required pattern="[0-9]*" type="text" id="imc" name="imc" class="form-control"
                   placeholder="IMC"  [(ngModel)]="form.imc" #imc="ngModel"
                   [class.is-invalid]="imc.invalid && (imc.dirty || imc.touched|| (sendAttempt))">
            <div class="invalid-feedback">
              El IMC debe ser numérico.
            </div>
          </div>
        </div>
        <!-- Addresses -->
        <div class="mt-3">
          <div class="row mt-3">
            <div class="col-6 pr-1">
              <input required pattern="[0-9A-Za-zÀ-ÖØ-öø-ÿ-\s]*" type="text" id="city" name="city" class="form-control"
                     placeholder="Ciudad" [(ngModel)]="form.ciudad" #city="ngModel"
                     [class.is-invalid]="city.invalid && (city.dirty || city.touched|| sendAttempt)">
              <div class="invalid-feedback">
                Porfavor indique un texto valido.
              </div>
            </div>
            <div class="col-6 pl-1">
              <input required pattern="[0-9]*" type="text" id="zip" name="zip" class="form-control"
                     placeholder="Código Postal"  [(ngModel)]="form.codigopostal" #zip="ngModel"
                     [class.is-invalid]="zip.invalid && (zip.dirty || zip.touched|| (sendAttempt))">
              <div class="invalid-feedback">
                El código postal debe ser numérico.
              </div>
            </div>
          </div>
          <div class="row mt-3">

            <div class="col-12">
              <input required pattern="[0-9A-Za-zÀ-ÖØ-öø-ÿ-\s]*" type="text" id="address" name="address" class="form-control"
                     placeholder="{{'Indicaciones'}}"  [(ngModel)]="form.indicaciones" #add="ngModel"
                     [class.is-invalid]="add.invalid && (add.dirty || add.touched|| (sendAttempt))">
              <div class="invalid-feedback">
                Porfavor indique un texto valido.
              </div>
            </div>
          </div>
        </div>
      </form>
      <div class="row mt-3">
        <div class="col-12 text-center">
          <button (click)="register()" class="btn btn-success">Registrarme</button>
        </div>
      </div>
    </div>
    <div class="row mt-3">
      <div class="col-12 text-center">
        <p style="color: whitesmoke">¿Ya tiene una cuenta? <a routerLink="/login" class="link-primary">Inicie Sesión</a></p>
      </div>
    </div>
  </div>
</div>

<app-success-dialog [header]="'Registro Exitoso'" [subheader]="''"
                    [message]="'Puede proceder a iniciar sesión'"></app-success-dialog>

<app-fail-dialog [header]="'Registro Fallido'"
                 [message]="errorMsg"></app-fail-dialog>
